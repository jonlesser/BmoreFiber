<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>Ask Google to Invest Billions in Baltimore&#146;s Future</title>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
        <meta name="google-site-verification" content="HF6g4zpEvarzG9FL_G97GW8p1C3PX9HRuxzy-r0x0U4" />
        <meta name="description" content="We want to show Google that Baltimore is teeming with creative people who are ready for ultra fast broadband. Get involved by adding your voice to the map or listing your organization."/>
        <meta name="keywords" content="baltimore, fiber, community, action, greatest city in america" />
        <link rel="shortcut icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="/static/screen.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css" type="text/css" media="screen" charset="utf-8"/>
        {# <link rel="stylesheet" href="/static/print.css" type="text/css" media="print"/> #}
        <!--[if lt IE 8]>
            <link rel="stylesheet" href="/static/ie.css" type="text/css" media="screen, projection"/>
        <![endif]-->

        <script type="text/javascript" charset="utf-8">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-12975830-1']);
            _gaq.push(['_trackPageview']);
        </script>
        <style type="text/css" media="screen">
        	label.inputError { color:red; font-weight:normal; }
        	input.inputError {border: 2px solid red; background:#FBE3E4;}
        	
        	#add_voice_dialog, #add_org_dialog, #success_dialog {display:none;}
        	.infowindow { padding-right: 40px;}
            #add_voice_form_map{
                width:250px;
                height: 125px; 
                border: 1px solid #BBBBBB;
                display:none;
            }
            #supporter_map {
                width:100%; 
                height:400px; 
                border-top:   8px solid #000;
                border-bottom:8px solid #000;
                margin-bottom:24px;
            }
            input[type="text"], input[type="password"], input.text, input.title, textarea, select {
                margin-top: 0em;
                width:245px;
                padding:3px;
            }
            .helper {color:grey; margin: 0 0 0.8em 0;}
            #add_voice_button, #add_org_button { font-size:18px; cursor: pointer;}
            #header {margin-top:24px;}
            #header h1 {font-size:100px; font-weight:bold;}
            #footer {color:#ccc; padding:100px 0 10px 0; clear:both;}
            #footer a {color:#ccc;}
            
            #organizations{ height:100%;}
            #org_list{list-style-type: none; display:block; padding:0px; margin:0 25px 25px 0;}
            #org_list li { float: left;
                margin-top: 20px;
                width: 400px;
                text-align:center;
            }
            
            #addthis span{
                background:none;
                margin:0;
                padding:0;
                width:0;
            }
            #addthis {height:inherit;}
            #addthis a {
                padding:0;
                display:inline;
                float:none;
            }
            
            .press_nugget {
                position:relative;
                width:400px;
            }
            .press_nugget img{
                width:100px;
                float:left;
            }
            .press_nugget p {
                font-style: italic;
                font-size:16px;
                margin-bottom:0;
                float:left;
            }
        </style>
        
    </head>
    <body>
        <div class="container">
            <div id="header">
                {# <h1>Bring Community Fiber to Baltimore</h1> #}
                <h1>Ask Google to Invest Billions in Baltimore&#146;s Future</h1>
            </div>
            {# <div id="support_teaser"> #}
            {#     <h2>Support Baltimore's Bid</h2> #}
            {#     <p><a href="#get_involved">Find out how</a></p> #}
            {# </div> #}
            <div id="letter" class="span-15">
                <p>
                    Google is planning to build ultra-high speed 
                    <a href="http://www.google.com/appserve/fiberrfi/public/overview" target="blank">broadband networks</a> in a 
                    small number of trial locations across the country. The plan is to deploy 
                    1 Gbps, fiber optic connections directly to people's homes. This connection 
                    would be 2,000% faster than the fastest connection currently available to 
                    Baltimore residents.
                </p>
                <p>
                    Google is asking local governments and residents to express their interest in 
                    the fiber optic trial, and to provide information about their community by 
                    completing a <a href="http://www.google.com/appserve/fiberrfi/public/options"  target="blank">
                    request for information</a> by March 26, 2010.
                </p>
                <p>
                    We want to show Google that Baltimore is teeming with creative people who are ready for ultra fast
                    broadband. 
                </p>
                <h3>Take Action!</h3>
                <ul>
                    <li><b><a href="#" class="add_voice_link">Add your voice</a></b> to the support map</li>
                    <li>Following us on <b><a href="http://twitter.com/bmorefiber">Twitter</a></b> and retweet like it's your job!</li>
                    <li>Become a <b><a href="http://www.facebook.com/BmoreFiber">Facebook fan</a></b></li>
                    <li><b><a id="youtube_direct_link" href="http://www.youtube.com/">Upload a video</a></b> supporting Baltimore</li>
                    <li>Join our <b><a href="http://groups.google.com/group/bmorefiber">Google group</a></b></li>
                    <li>Get your <b><a href="#" class="add_org_link">business</a></b> or <b><a href="#" class="add_org_link">community group</a></b> involved</li>
                </ul>
            </div>
            <div class="span-7 last">
                <img src="/static/bmorefiber_logo.png"/>
            </div>
            <h1 class="span-20">{{ total_marks}} Baltimoreans for Community Fiber <button id="add_voice_button">Get on the Map</button></h1>
        </div>
        <div id="supporter_map"></div>
        <div class="container">
            <div class="">
                <div id="add_voice_dialog">
                    <form action="/" method="post" accept-charset="utf-8" id="add_voice_form">
                        <div>
                            <label for="id_name">Name (required)</label><br/>
                            <input id="id_name" type="text" name="name" class="title2" maxlength="255" />
                        </div>
                        <div>
                            <label for="id_address">Location (required)</label><br/>
                            <input id="id_address" type="text" name="address" class="title2" maxlength="255" />
                            <div id="add_voice_form_map"></div>
                            <p class="helper">As specific as you want to be</p>
                            <input type="hidden" name="geolat" value="" id="id_geolat"/>
                            <input type="hidden" name="geolng" value="" id="id_geolng"/>
                        </div>
                        <div>
                            <label for="id_reason">Why is Baltimore the place for 1Gbps community fiber? (required)</label><br/>
                            <input id="id_reason" type="text" name="reason" class="title2" maxlength="255" />
                        </div>
                        <div>
                            <label for="id_email">Email (required)</label><br/>
                            <input id="id_email" type="text" name="email" class="title2" maxlength="255" />
                            {# <p class="helper">Never shared or displayed</p> #}
                        </div>
                    
                        {# <div> #}
                        {#     <label for="id_website">Website </label><br/> #}
                        {#     <input id="id_website" type="text" name="website" class="title2" maxlength="255" /> #}
                        {# </div> #}
                        {# <div> #}
                        {#     <label for="id_video_url">YouTube URL: </label><br/> #}
                        {#     <input id="id_video_url" type="text" name="video_url" class="title2"  maxlength="255" /> #}
                        {#     <p class="helper">Record a video testimonial an embed it here.</p> #}
                        {# </div> #}
                        <div>
                            <input type="hidden" name="is_org" value="no" id="id_is_org"/>
                        </div>
                    </form>
                </div>
                <h1>Local Orgs and Coms for Fiber in Baltimore <button id="add_org_button">Add your Organization</button></h1>
                <div id="organizations">
                    {% if orgs %}
                        <ul id="org_list">
                            {% for org in orgs %}
                                <li>
                                    {% if org.website %}
                                        <a href="{{org.website}}" target="_blank">
                                            {% if org.image %}
                                                <img src="/static/logos/{{org.image}}" alt="{{org.name}}" title="{% if org.reason %} {{org.reason}} {% else %} {{org.name}} {% endif %}"/>
                                            {% endif %}
                                        </a>
                                    {% else %}
                                        {% if org.image %}
                                            <img src="/static/logos/{{org.image}}" alt="{{org.name}}" title="{{org.name}}"/>
                                        {% endif %}
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        You could be the first!
                    {% endif %}
                </div>
                {# <h1>Press Coverage about Community Fiber in Baltimore</h1> #}
                {# <div id="press_coverage"> #}
                {#     <div class="press_nugget"> #}
                {#         <img src="/static/logos_dev/5.png"/> #}
                {#         <p class="press_pullquote">"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore"</p> #}
                {#         <a href="#">Read more</a> #}
                {#     </div> #}
                {# </div> #}
                <div id="add_org_dialog">
                    <form action="/" method="post" accept-charset="utf-8" id="add_org_form">
                        <div>
                            <label for="id_org_name">Organization Name (required) </label><br/>
                            <input id="id_org_name" type="text" name="name" maxlength="255" />
                        </div>
                        <div>
                            <label for="id_org_email">Your email (required)</label><br/>
                            <input id="id_org_email" type="text" name="email" maxlength="255" />
                        </div>
                        <div>
                            <label for="id_org_reason">Why does your organization support 1Gbps community fiber in Baltimore? </label><br/>
                            <input id="id_org_reason" type="text" name="reason" maxlength="255" />
                        </div>
                        <div>
                            <label for="id_org_website">Organization Website </label><br/>
                            <input id="id_org_website" type="text" name="website" maxlength="255" />
                        </div>
                        <div>
                            <input type="hidden" name="is_org" value="yes" id="id_is_org"/>
                        </div>
                    </form>
                </div>
                <div id="success_dialog">
                    <p><strong>Thanks, we'll add your info ASAP!</strong></p>
                    <p>
                        Don't forget to tell Google that Baltimore is the perfect place for ultra-fast, 1Gbps fiber broadband.
                    </p>
                </div>
                <div id="youtube_direct_dialog">
                    <div id="ytdContainer"></div>
                </div>
                <!-- AddThis Button END -->
                <div id="footer" class="span-19 last">
                    <p>
                        This site is in no way affiliated with Google. We just really want Google to bring ultra-fast 
                        broadband to Baltimore. Built with <a href="http://code.google.com/appengine/" target="blank">App Engine</a>. Email addresses collected on this site will never be shared or sold. 
                        Questions, comments, threats? <a href="mailto:jonlesser+gfiber@gmail.com">Contact Us</a>
                    </p>
                </div>
            </div>
        </div> {# Close container #}
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="http://ajax.microsoft.com/ajax/jquery.validate/1.6/jquery.validate.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript" charset="utf-8"></script>
        <script src="/static/jquery.form.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript" src="http://bmorefiberytd.appspot.com/js/ytd-embed.js"></script>
        <script type="text/javascript" charset="utf-8">
            gmaps_api_key = "ABQIAAAAP-A6pWVxrkKHiKdNkaDuqxR8t0XXU1cjak2ItSgHcvLAuGamARRnu2MwOnAJ7dK5QGbnLcLcOwHKRQ";
            baltimore = new google.maps.LatLng(39.29, -76.61);
            bounding = new google.maps.LatLngBounds(new google.maps.LatLng(39.2429, -76.6942), new google.maps.LatLng(39.4298, -76.4566));
            $(document).ready(function() {
                jQuery.validator.setDefaults({ success: "valid", onkeyup: function(element){}, errorClass: "inputError"});
                jQuery.validator.addMethod("youtube", function(value, element) { 
                    return this.optional(element) || /^http:\/\/www\.youtube\.com\/watch\?.*/.test(value); 
                }, "You need to use a YouTube video URL with in the form of http://www.youtube.com/watch?v=xxxxxxxxxxx");
                jQuery.validator.addMethod("valid_address", function(value, element) { 
                    return ($("#id_geolat").val() == "") ?  false : true;
                }, "We couldn't locate that location.");

                // Setup Add your Voice form and dialog
                $("#id_address").live("blur", function(){
                    var geocoder = new google.maps.Geocoder();
                    geocoder.geocode({ address: $("#id_address").val(), bounds: bounding }, function(results, status) {
                        if (status == google.maps.GeocoderStatus.ZERO_RESULTS || $("#id_address").val() == "") {
                            $("#id_geolat").val("");
                            $("#id_geolng").val("");
                            $("#add_voice_form_map").empty().hide();
                            $("#add_voice_form").validate().element("#id_geolng");
                            return;
                        }
                        if (status != google.maps.GeocoderStatus.OK) {
                            alert("Oh Noes, Google's geocoder service is down. Try again?");
                            return;
                        }
                        
                        // Make a new map with the location and append it after the field
                        $("#add_voice_form_map").show();
                        var add_map = new google.maps.Map(document.getElementById("add_voice_form_map"), {
                            zoom: 13,
                            center: results[0].geometry.location,
                            mapTypeId: google.maps.MapTypeId.ROADMAP,
                            mapTypeControl: false,
                            navigationControl: true,
                            navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                            scaleControl: false,
                            keyboardShortcuts: false,
                            scrollwheel: false
                        });
                        var marker = new google.maps.Marker({
                            map: add_map, 
                            position: results[0].geometry.location
                        });
                        $("#id_geolat").val(results[0].geometry.location.lat());
                        $("#id_geolng").val(results[0].geometry.location.lng());
                        
                        // Revalidate the address field to clear any errors that might be there
                        $("#add_voice_form").validate().element("#id_geolng");
                    });
                });
                $("#add_voice_form").validate({
                    rules: {
                        name:      { required: true },
                        email:     { required: true, email: true },
                        reason:    { required: true },
                        address:   { required: true },
                        geolng:    { valid_address: true },
                        website:   { url: true },
                        video_url: { url: true, youtube: true }
                    }
                });
                $('#add_voice_form').ajaxForm({
                    success: function(responseText){
                        $("#add_voice_dialog").dialog("close");
                        $("#success_dialog").dialog("open");
                    }
                });
                $("#add_voice_dialog").dialog({
                    title: 'Add your Voice', modal: true, resizable: false, draggable: false, autoOpen: false, 
                    width: 283,
                    height: 490,
                    buttons: { 
                        "Add your Voice": function() {
                            // $('#add_voice_dialog').next().find("button").attr("disabled", "disabled").addClass("ui-state-disable");
                            $('#add_voice_form').submit();
                        }
                    }
                });
                $("#add_voice_button").click(function(){$('#add_voice_dialog').dialog('open')});
                $(".add_voice_link").click(function(){$('#add_voice_dialog').dialog('open'); return false;});
                
                // Setup buttons
                $("button").addClass("ui-button ui-state-default ui-corner-all");
                $("button").hover(function(){
                    $(this).addClass("ui-state-hover");
                }, function(){
                    $(this).removeClass("ui-state-hover");
                });
                
                
                // Setup Add your Organization form and dialog
                $("#add_org_dialog").dialog({
                    title: 'Add your Organization', modal: true, resizable: false, draggable: false, autoOpen: false, 
                    width: 283,
                    height: 330,
                    buttons: { 
                        "Add your Organization": function() {
                            $('#add_org_form').submit(); 
                        }
                    }
                });
                $("#add_org_button").click(function(){$('#add_org_dialog').dialog('open')});
                $(".add_org_link").click(function(){$('#add_org_dialog').dialog('open'); return false;});
                $("#add_org_form").validate({
                    rules: {
                        name:      { required: true },
                        email:     { required: true, email: true },
                        reason:    {  },
                        website:   { url: true }
                    }
                });
                $('#add_org_form').ajaxForm({
                    success: function(responseText){
                        $("#add_org_dialog").dialog("close");
                        $("#success_dialog").dialog("open");
                    }
                });
                
                $("#success_dialog").dialog({
                    title: 'Success', modal: true, resizable: false, draggable: false, autoOpen: false, 
                    width: 283,
                    height: 250,
                    buttons: { 
                        "I already did": function() {
                            $("#success_dialog").dialog("close");
                        },
                        "Nominate Baltimore!": function() {
                            window.location = "http://www.google.com/appserve/fiberrfi/public/options";
                        }
                    }
                });
                
                // Setup links buttons
                $("#googlegroups_button").click(function(){
                    window.location = "http://groups.google.com/group/bmorefiber";
                });
                $("#twitter_button").click(function(){
                    window.location = "http://twitter.com/bmorefiber";
                });
                
                
                // Setup supporter map
                var map = new google.maps.Map(document.getElementById("supporter_map"), {
                    zoom: 11,
                    center: baltimore,
                    mapTypeId: google.maps.MapTypeId.TERRAIN,
                    mapTypeControl: false,
                    navigationControl: true,
                    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                    scaleControl: false,
                    scrollwheel: false
                });
                
                // Add map markers
                var infoWindow = new google.maps.InfoWindow();
                var markerBounds = new google.maps.LatLngBounds();
                var markerArray = [];

                function makeMarker(options){
                    var pushPin = new google.maps.Marker({map:map});
                    pushPin.setOptions(options);
                    google.maps.event.addListener(pushPin, "click", function(){
                        infoWindow.setOptions(options);
                        infoWindow.open(map, pushPin);
                    });
                    markerBounds.extend(options.position);
                    markerArray.push(pushPin);
                    return pushPin;
                }
                google.maps.event.addListener(map, "click", function(){
                    infoWindow.close();
                });
                
                {% for marker in markers %}
                    content = "<div class='infowindow'>";
                    content += "<h3>{{marker.reason}}</h3>";
                    {% if marker.website %}
                        content += "<p>&mdash;<a href='{{marker.website}}'>{{marker.name}}</a></p>";
                    {% else %}
                        content += "<p>&mdash;{{marker.name}}</p>";
                    {% endif %}
                    {% if marker.video_embed %}content += '<p>{{marker.video_embed}}</p>';{% endif %}
                    content += "</div>";
                    
                    makeMarker({
                        position: new google.maps.LatLng({{marker.geoloc}}),
                        content: content,
                        title: "{{marker.name}}"
                    });
                {% endfor %}
            });
            
            // Setup YouTube Direct
            $("#youtube_direct_dialog").dialog({
                title: 'Upload a Video', modal: true, resizable: true, draggable: true, autoOpen: false, 
                width: 330,
                height: 540,
                beforeclose: function(event, ui) {
                    $("#youtube_direct_link").show();
                }
            });
            $("#youtube_direct_link").click(function(){
                $("#youtube_direct_dialog").dialog("open");
                return false;
            })
            var ytd = new Ytd();
            ytd.setAssignmentId("7");
            ytd.setCallToAction("youtube_direct_link");
            var containerWidth = 300;
            var containerHeight = 470;
            ytd.setYtdContainer("ytdContainer", containerWidth, containerHeight);
            ytd.ready();
            
            // If we're returning from ytd login, show the popup
            if (location.hash.search(/return\-sessionId/) > 0){
                $("#youtube_direct_dialog").dialog("open");
                location.hash = "";
            }
            
            // Google Analytics Tracking
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
            })();
        </script>
    </body>
</html>